@using RichnessSoft.Component.Shared
<DxTextBox Id="@ControlID"
           InputId="@ControlID"
           Text="@BindValue"
           BindValueMode="BindValueMode.OnInput"
           Enabled="@Enabled"
           SizeMode="@WebConstUtil.Control.goTextSize"
           ClearButtonDisplayMode="DevExpress.Blazor.DataEditorClearButtonDisplayMode.Never"
           CssClass="@CssClass"
           InputCssClass="@CssClass"
           NullText="@NullText"
           ReadOnly="@IsViewOnly"
           DisplayFormat="@DisplayFormat"
           Attributes="@dictAttributes"
           Password="@IsPassword"
           TextExpression="@(()=>BindValue)"
           TextChanged="@TextChanged">
</DxTextBox>

@code {
    [Parameter]
    public string ControlID { get; set; } = "txtEditManualBind";
    [Parameter]
    public string BindValue { get; set; } = "";
    [Parameter]
    public bool IsViewOnly { get; set; } = false;
    [Parameter]
    public bool Enabled { get; set; } = true;
    [Parameter]
    public bool IsPassword { get; set; } = false;
    [Parameter]
    public RenderFragment ChildContent { get; set; }
    [Parameter]
    public EventCallback<string> TextChanged { get; set; }
    [Parameter]
    public string DisplayFormat { get; set; } = "";
    [Parameter]
    public string NullText { get; set; } = "";
    [Parameter]
    public string CssClass { get; set; } = "text-left";
    [Parameter]
    public string InputName { get; set; } = "txtEditManualBind";

    Dictionary<string, object> dictAttributes;

    protected override void OnInitialized()
    {
        dictAttributes = new Dictionary<string, object>();
        dictAttributes.Add("name1", InputName);
    }
    protected override async Task OnInitializedAsync()
    {
        await InvokeAsync(StateHasChanged);
    }
    public void gmSetEnable(bool Enabled = true)
    {
        this.Enabled = Enabled;
        StateHasChanged();
    }
    public void gmSetReadOnly(bool ReadOnly = false)
    {
        this.IsViewOnly = ReadOnly;
        StateHasChanged();
    }
}
